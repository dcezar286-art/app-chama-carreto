<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chama Carreto – Demo App</title>
  <meta name="description" content="Demo interativa do aplicativo Chama Carreto para apresentação.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #020617;
      --bg-elevated: #020617;
      --primary: #f97316;
      --primary-strong: #ea580c;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --border: #1f2937;
      --radius-lg: 26px;
      --radius-md: 18px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #111827 0, #020617 45%, #020617 100%);
      display: flex;
      justify-content: center;
      padding: 12px;
      color: var(--text);
    }

    .frame {
      width: 100%;
      max-width: 430px;
      height: 90vh;
      max-height: 820px;
      background: rgba(15,23,42,0.96);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148,163,184,0.25);
      box-shadow:
        0 18px 45px rgba(0,0,0,0.7),
        0 0 0 1px rgba(15,23,42,0.9);
      backdrop-filter: blur(18px);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .status-bar {
      height: 22px;
      padding: 0 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-soft);
    }

    .header {
      padding: 10px 16px 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-icon {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fed7aa, #f97316 45%, #9a3412 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0b1120;
      font-weight: 800;
      font-size: 16px;
      box-shadow: 0 0 0 2px rgba(15,23,42,0.9);
    }

    .logo-text-main {
      font-size: 15px;
      font-weight: 700;
    }

    .logo-text-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .tag-demo {
      font-size: 10px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(16,185,129,0.12);
      border: 1px solid rgba(34,197,94,0.4);
      color: #6ee7b7;
    }

    .role-tabs {
      margin: 6px 16px 10px;
      padding: 4px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid var(--border);
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 4px;
    }

    .role-tab-btn {
      border: none;
      border-radius: 999px;
      font-size: 12px;
      padding: 7px 0;
      cursor: pointer;
      background: transparent;
      color: var(--text-soft);
      font-weight: 500;
      transition: all 0.16s ease-out;
    }

    .role-tab-btn span {
      display: block;
      font-size: 10px;
      opacity: 0.8;
    }

    .role-tab-btn.active {
      background: var(--primary);
      color: #0b1120;
      box-shadow: 0 8px 18px rgba(249,115,22,0.5);
    }

    .screen {
      flex: 1;
      padding: 6px 16px 10px;
      display: none;
      overflow-y: auto;
    }

    .screen.active {
      display: block;
    }

    .title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-soft);
      margin-bottom: 12px;
    }

    .card {
      background: #020617;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      padding: 12px 12px 10px;
      margin-bottom: 10px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-soft);
    }

    .badge {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(249,115,22,0.12);
      color: #fed7aa;
      border: 1px solid rgba(248,250,252,0.06);
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 3px;
      margin-bottom: 8px;
    }

    label {
      font-size: 11px;
      color: var(--text-soft);
    }

    input, select, textarea {
      border-radius: 10px;
      border: 1px solid #1f2937;
      background: #020617;
      padding: 7px 9px;
      font-size: 12px;
      color: var(--text);
      outline: none;
      transition: border 0.16s ease-out, box-shadow 0.16s ease-out;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.5);
    }

    textarea {
      resize: vertical;
      min-height: 52px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 2.2fr 1.2fr;
      gap: 8px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      padding: 9px 0;
      transition: transform 0.08s ease-out, box-shadow 0.08s ease-out, background 0.16s;
    }

    .btn-primary {
      width: 100%;
      background: linear-gradient(to right, var(--primary), var(--primary-strong));
      color: #0b1120;
      box-shadow: 0 12px 24px rgba(249,115,22,0.6);
      margin-top: 4px;
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 7px 16px rgba(249,115,22,0.6);
    }

    .btn-secondary {
      width: 100%;
      border-radius: 10px;
      background: transparent;
      border: 1px dashed rgba(148,163,184,0.6);
      color: var(--text-soft);
      font-size: 11px;
      padding: 7px 0;
      margin-top: 6px;
    }

    .status-box {
      border-radius: 12px;
      border: 1px dashed rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.96);
      padding: 8px 10px;
      font-size: 11px;
      margin-top: 8px;
    }

    .status-title {
      font-weight: 600;
      color: #fbbf24;
      margin-bottom: 2px;
    }

    .status-ok {
      border-color: rgba(34,197,94,0.5);
      background: rgba(6,95,70,0.5);
      color: #bbf7d0;
    }

    .status-ok .status-title {
      color: #bbf7d0;
    }

    .status-muted {
      color: var(--text-soft);
    }

    .loader {
      width: 16px;
      height: 16px;
      border: 2px solid rgba(156,163,175,0.4);
      border-top-color: #f97316;
      border-radius: 999px;
      animation: spin 0.9s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-right: 6px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .chip {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid rgba(31,41,55,0.9);
      color: #9ca3af;
    }

    .driver-card {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px solid #1f2937;
      background: #020617;
      padding: 8px 10px;
      font-size: 11px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .driver-meta {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .btn-small {
      border-radius: 999px;
      border: none;
      padding: 6px 10px;
      font-size: 11px;
      cursor: pointer;
      background: rgba(34,197,94,0.18);
      color: #bbf7d0;
      font-weight: 600;
    }

    .timeline {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .timeline-step {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #4b5563;
    }

    .dot.active {
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34,197,94,0.2);
    }

    .footer {
      padding: 4px 10px 8px;
      text-align: center;
      font-size: 10px;
      color: #6b7280;
    }

    .footer span {
      color: var(--primary);
      font-weight: 600;
    }

    @media (max-height: 640px) {
      .frame {
        height: 95vh;
      }
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="status-bar">
      <div>Chama Carreto • Demo</div>
      <div>Brás / 25 de Março</div>
    </div>

    <div class="header">
      <div class="logo">
        <div class="logo-icon">C</div>
        <div>
          <div class="logo-text-main">Chama Carreto</div>
          <div class="logo-text-sub">App de demonstração</div>
        </div>
      </div>
      <div class="tag-demo">DEMO INTERATIVA</div>
    </div>

    <div class="role-tabs">
      <button class="role-tab-btn active" data-role="cliente">
        Cliente
        <span>Simular chamado</span>
      </button>
      <button class="role-tab-btn" data-role="carreteiro">
        Carreteiro
        <span>Ver chamados</span>
      </button>
    </div>

    <!-- TELA CLIENTE -->
    <section class="screen active" id="screen-cliente">
      <h2 class="title">Chamar carreto</h2>
      <p class="subtitle">
        Preencha como se estivesse saindo da 25 de Março ou Brás e veja o carreteiro aparecendo do outro lado.
      </p>

      <div class="chip-row">
        <div class="chip">Saída: 25 de Março / Brás</div>
        <div class="chip">Ideal para lojistas</div>
        <div class="chip">Fluxo 100% simulado</div>
      </div>

      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Dados do carreto</div>
            <div class="card-subtitle">Esse é o fluxo que o cliente verá no app real.</div>
          </div>
          <span class="badge">Cliente</span>
        </div>

        <div class="field-group">
          <label for="origem">Local de retirada</label>
          <input id="origem" type="text" placeholder="Ex: Rua Oriente, 500 – Brás" />
        </div>

        <div class="field-group">
          <label for="destino">Destino</label>
          <input id="destino" type="text" placeholder="Ex: Jaçanã, São Paulo" />
        </div>

        <div class="grid-2">
          <div class="field-group">
            <label for="tipoCarga">Tipo de carga</label>
            <select id="tipoCarga">
              <option value="" selected disabled>Selecione</option>
              <option value="bebidas">Bebidas</option>
              <option value="roupas">Roupas / Confecção</option>
              <option value="alimentos">Alimentos</option>
              <option value="fragil">Frágil / Eletrônicos</option>
              <option value="outros">Outros</option>
            </select>
          </div>

          <div class="field-group">
            <label for="peso">Peso estimado</label>
            <input id="peso" type="text" placeholder="Ex: 300 kg" />
          </div>
        </div>

        <div class="field-group">
          <label for="obs">Observações (opcional)</label>
          <textarea id="obs" placeholder="Ex: Carregar no subsolo, precisa de carrinho, etc."></textarea>
        </div>

        <button class="btn btn-primary" id="btnChamar">
          Chamar carreto agora
        </button>

        <button class="btn btn-secondary" id="btnSimularPrecoCliente">
          Simular apenas o valor estimado
        </button>

        <div class="status-box status-muted" id="statusCliente" style="display:none;"></div>

        <div class="timeline" id="timelineCliente" style="display:none;">
          <div class="timeline-step">
            <div class="dot" id="dot-pedido"></div>
            <div>Pedido enviado aos carreteiros próximos</div>
          </div>
          <div class="timeline-step">
            <div class="dot" id="dot-encontrado"></div>
            <div>Carreteiro encontrado</div>
          </div>
          <div class="timeline-step">
            <div class="dot" id="dot-aceito"></div>
            <div>Carreto aceito e em deslocamento</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TELA CARRETEIRO -->
    <section class="screen" id="screen-carreteiro">
      <h2 class="title">Chamados próximos</h2>
      <p class="subtitle">
        Essa é a visão do carreteiro: ele fica online e recebe pedidos de carreto perto dele.
      </p>

      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">Status do carreteiro</div>
            <div class="card-subtitle" id="txtStatusCarreteiro">Você está online aguardando chamados.</div>
          </div>
          <span class="badge">Carreteiro</span>
        </div>

        <div class="status-box status-muted" id="statusCarreteiro">
          <div class="status-title">Modo demonstração</div>
          <div>
            Quando você aciona um carreto na aba <strong>Cliente</strong>, ele aparece aqui como
            <strong>chamado pendente</strong>.
          </div>
        </div>

        <div id="listaChamados"></div>
      </div>
    </section>

    <div class="footer">
      Demo interativa criada para apresentar o fluxo do app <span>Chama Carreto</span>.
    </div>
  </div>

  <script>
    // --- Alternância de aba Cliente / Carreteiro ---
    const roleBtns = document.querySelectorAll('.role-tab-btn');
    const screenCliente = document.getElementById('screen-cliente');
    const screenCarreteiro = document.getElementById('screen-carreteiro');

    roleBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        roleBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const role = btn.dataset.role;
        if (role === 'cliente') {
          screenCliente.classList.add('active');
          screenCarreteiro.classList.remove('active');
        } else {
          screenCliente.classList.remove('active');
          screenCarreteiro.classList.add('active');
        }
      });
    });

    // --- Estado simples da simulação ---
    let chamadoAtual = null;
    let statusChamado = "nenhum"; // nenhum, buscando, encontrado, aceito

    const statusClienteEl = document.getElementById('statusCliente');
    const timelineClienteEl = document.getElementById('timelineCliente');
    const dotPedido = document.getElementById('dot-pedido');
    const dotEncontrado = document.getElementById('dot-encontrado');
    const dotAceito = document.getElementById('dot-aceito');

    const statusCarreteiroEl = document.getElementById('statusCarreteiro');
    const txtStatusCarreteiro = document.getElementById('txtStatusCarreteiro');
    const listaChamadosEl = document.getElementById('listaChamados');

    const btnChamar = document.getElementById('btnChamar');
    const btnSimularPrecoCliente = document.getElementById('btnSimularPrecoCliente');

    function resetTimeline() {
      [dotPedido, dotEncontrado, dotAceito].forEach(d => d.classList.remove('active'));
    }

    function calcularPreco(tipoCarga) {
      const base = 35;
      const extra = {
        bebidas: 25,
        roupas: 15,
        alimentos: 20,
        fragil: 40,
        outros: 10
      };
      const rand = Math.floor(Math.random() * 25);
      return base + (extra[tipoCarga] || 10) + rand;
    }

    function mostrarStatusCliente(html, ok = false, loading = false) {
      statusClienteEl.style.display = 'block';
      statusClienteEl.classList.toggle('status-ok', ok);
      statusClienteEl.classList.toggle('status-muted', !ok);

      const prefix = loading ? '<span class="loader"></span>' : '';
      statusClienteEl.innerHTML = prefix + html;
    }

    function atualizarTelaCarreteiro() {
      listaChamadosEl.innerHTML = '';

      if (!chamadoAtual || statusChamado === "nenhum") {
        statusCarreteiroEl.classList.remove('status-ok');
        statusCarreteiroEl.classList.add('status-muted');
        statusCarreteiroEl.innerHTML = `
          <div class="status-title">Sem chamados no momento</div>
          <div>Assim que um cliente pedir um carreto, o pedido aparece aqui automaticamente.</div>
        `;
        txtStatusCarreteiro.textContent = "Você está online aguardando chamados.";
        return;
      }

      if (statusChamado === "buscando") {
        statusCarreteiroEl.classList.remove('status-ok');
        statusCarreteiroEl.classList.add('status-muted');
        statusCarreteiroEl.innerHTML = `
          <div class="status-title">Aguardando pedidos...</div>
          <div>Um cliente está prestes a solicitar um carreto.</div>
        `;
        return;
      }

      // Quando encontrado / pendente para aceite
      if (statusChamado === "encontrado") {
        statusCarreteiroEl.classList.add('status-ok');
        statusCarreteiroEl.innerHTML = `
          <div class="status-title">Novo chamado pendente</div>
          <div>Você tem um pedido de carreto saindo do Brás / 25 de Março.</div>
        `;
        txtStatusCarreteiro.textContent = "Novo chamado disponível para aceitar.";

        const card = document.createElement('div');
        card.className = 'driver-card';
        card.innerHTML = `
          <div>
            <div><strong>${chamadoAtual.origem}</strong> ➜ ${chamadoAtual.destino}</div>
            <div class="driver-meta">
              Carga: ${chamadoAtual.tipo || 'Não informada'} • Estimativa: R$ ${chamadoAtual.preco}
            </div>
            <div class="driver-meta">Cliente: ${chamadoAtual.clienteNome}</div>
          </div>
          <button class="btn-small">Aceitar carreto</button>
        `;

        const btnAceitar = card.querySelector('.btn-small');
        btnAceitar.addEventListener('click', () => {
          statusChamado = "aceito";
          txtStatusCarreteiro.textContent = "Você aceitou o chamado e está a caminho do cliente.";
          statusCarreteiroEl.innerHTML = `
            <div class="status-title">Carreto aceito ✅</div>
            <div>Em um app real, aqui apareceria a rota até o cliente e a opção de iniciar/encerrar o serviço.</div>
          `;
          listaChamadosEl.innerHTML = '';
          dotAceito.classList.add('active');

          mostrarStatusCliente(
            `O carreteiro <strong>${chamadoAtual.carreteiroNome}</strong> aceitou seu pedido e está a caminho. 
            No app real você veria o tempo estimado de chegada em tempo real.`,
            true
          );
        });

        listaChamadosEl.appendChild(card);
      }
    }

    btnChamar.addEventListener('click', () => {
      const origem = document.getElementById('origem').value.trim();
      const destino = document.getElementById('destino').value.trim();
      const tipo = document.getElementById('tipoCarga').value;
      const peso = document.getElementById('peso').value.trim();

      if (!origem || !destino || !tipo) {
        mostrarStatusCliente('Preencha origem, destino e tipo de carga para simular o chamado.');
        timelineClienteEl.style.display = 'none';
        resetTimeline();
        return;
      }

      const preco = calcularPreco(tipo);

      chamadoAtual = {
        origem,
        destino,
        tipo,
        peso,
        preco,
        clienteNome: "Lojista Exemplo",
        carreteiroNome: "João - Fiorino branca"
      };

      statusChamado = "buscando";
      resetTimeline();
      dotPedido.classList.add('active');
      timelineClienteEl.style.display = 'block';

      mostrarStatusCliente(
        'Enviando seu pedido para os carreteiros próximos...',
        false,
        true
      );

      atualizarTelaCarreteiro();

      // Simula tempo de busca
      setTimeout(() => {
        if (!chamadoAtual) return;

        statusChamado = "encontrado";
        dotEncontrado.classList.add('active');
        mostrarStatusCliente(
          `Encontramos um carreteiro próximo: <strong>${chamadoAtual.carreteiroNome}</strong>.
          Valor estimado do carreto: <strong>R$ ${chamadoAtual.preco}</strong>. 
          Agora troque para a aba <strong>Carreteiro</strong> e veja como ele recebe o chamado.`,
          true
        );

        atualizarTelaCarreteiro();
      }, 1300);
    });

    btnSimularPrecoCliente.addEventListener('click', () => {
      const tipo = document.getElementById('tipoCarga').value;
      if (!tipo) {
        mostrarStatusCliente('Selecione o tipo de carga para ver um valor estimado.');
        timelineClienteEl.style.display = 'none';
        resetTimeline();
        return;
      }
      const preco = calcularPreco(tipo);
      statusClienteEl.style.display = 'block';
      timelineClienteEl.style.display = 'none';
      resetTimeline();
      mostrarStatusCliente(
        `Para esse tipo de carga, a estimativa inicial ficaria em torno de <strong>R$ ${preco}</strong> 
        (valor apenas ilustrativo para demonstração).`
      );
      statusChamado = "nenhum";
      chamadoAtual = null;
      atualizarTelaCarreteiro();
    });
  </script>
</body>
</html>

